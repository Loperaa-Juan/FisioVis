{% extends 'base.html' %}
{% load tailwind_filters %}
{% block content %}

<div class="flex flex-col md:flex-row gap-8 max-w-5xl mx-auto py-10">

  <!-- Contenedor del video -->
  <div class="flex-1">
    <div class="bg-black rounded-xl overflow-hidden shadow-lg border border-gray-200">
      <video id="video-stream" autoplay playsinline class="w-full h-96 object-cover">
        <source src="http://192.168.1.3:8080" type="video/mp4">
      </video>
    </div>

    <p class="text-sm text-gray-500 mt-2">
      *Video procesado en tiempo real con MediaPipe
    </p>
  </div>

  <!-- Panel derecho -->
  <div class="flex-1 flex flex-col gap-6">

    <!-- Texto generado -->
    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 h-48 overflow-auto">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">Resultados</h2>
      <p id="output-text" class="text-gray-700">
        Aún no hay resultados. Realiza una evaluación.
      </p>
    </div>

    <!-- Botón -->
    <button
      id="evaluate-btn"
      class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-all shadow-md">
      Evaluar Movimiento
    </button>
  </div>
</div>

{% comment %} <script>
  // Aquí conectas tu stream procesado por MediaPipe 
  // Ejemplo si usas getUserMedia
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      const video = document.getElementById("video-stream");
      video.srcObject = stream;
    })
    .catch(err => console.error("Error cámara:", err));

  // Listener para botón (puedes conectar WebSocket/AJAX/Fetch)
  document.getElementById("evaluate-btn").addEventListener("click", () => {
    console.log("Evaluando...");
    // Lógica de petición para obtener inferencia va aquí
  });
</script> {% endcomment %}

{% endblock content %}
